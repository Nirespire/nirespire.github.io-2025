<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Primary Meta Tags -->
  <title>{{ title }} | Sanjay Nair</title>
  <meta name="title" content="{{ title }} | Sanjay Nair">
  <meta name="description" content="{{ description or "The Monthly Retro - A high-signal monthly digest bridging long-form writing and curated discovery." }}">
  <meta name="author" content="Sanjay Nair">
  <meta name="robots" content="index, follow">

  <!-- Open Graph / Facebook -->
  <meta property="og:type" content="article">
  <meta property="og:url" content="{{ page.url | absoluteUrl("https://sanjaynair.me") }}">
  <meta property="og:title" content="{{ title }} | Sanjay Nair">
  <meta property="og:description" content="{{ description or "The Monthly Retro - A high-signal monthly digest bridging long-form writing and curated discovery." }}">
  <meta property="og:image" content="/assets/images/profile.png">

  <!-- Twitter -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:creator" content="@Nirespire">
  <meta name="twitter:title" content="{{ title }} | Sanjay Nair">
  <meta name="twitter:description" content="{{ description or "The Monthly Retro - A high-signal monthly digest bridging long-form writing and curated discovery." }}">

  <link rel="icon" type="image/x-icon" href="/assets/images/favicon.ico">
  <link rel="canonical" href="{{ page.url | absoluteUrl("https://sanjaynair.me") }}">

  <!-- Note: We intentionally do NOT include the main tailwind-built.css here.
       The newsletter has its own complete "Sunday Paper" styling that should be
       fully independent from the main site's dark theme. -->

  <!-- Google Fonts for editorial feel -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Merriweather:ital,wght@0,400;0,700;1,400&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">

  <style>
    /* Reset and base styles for standalone newsletter */
    *, *::before, *::after {
      box-sizing: border-box;
    }

    body {
      margin: 0;
      padding: 0;
      background-color: #FAF8F5;
      color: #333333;
      background-image: none;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
    }

    a {
      color: inherit;
      text-decoration: none;
    }

    /* Newsletter-specific "Sunday Paper" styling */
    .newsletter-container {
      --newsletter-bg: #FAF8F5;
      --newsletter-text: #333333;
      --newsletter-text-secondary: #666666;
      --newsletter-accent: #F97316;
      --newsletter-border: #E5E0D8;

      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background-color: var(--newsletter-bg);
      color: var(--newsletter-text);
      min-height: 100vh;
    }

    .newsletter-container h1,
    .newsletter-container h2,
    .newsletter-container h3 {
      font-family: 'Merriweather', Georgia, 'Times New Roman', serif;
      font-weight: 700;
      color: var(--newsletter-text);
    }

    .newsletter-header {
      text-align: center;
      padding: 3rem 1rem 2rem;
      border-bottom: 2px solid var(--newsletter-border);
    }

    .newsletter-logo {
      font-family: 'Merriweather', Georgia, serif;
      font-size: 2.5rem;
      font-weight: 700;
      letter-spacing: -0.02em;
      color: var(--newsletter-text);
      margin-bottom: 0.5rem;
    }

    .newsletter-logo span {
      color: var(--newsletter-accent);
    }

    .newsletter-date {
      font-size: 0.875rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--newsletter-text-secondary);
    }

    .newsletter-content {
      max-width: 680px;
      margin: 0 auto;
      padding: 2rem 1.5rem;
    }

    .newsletter-section {
      margin-bottom: 3rem;
      padding-bottom: 2rem;
      border-bottom: 1px solid var(--newsletter-border);
    }

    .newsletter-section:last-of-type {
      border-bottom: none;
    }

    .newsletter-section h2 {
      font-size: 1.5rem;
      margin-bottom: 1.25rem;
      padding-bottom: 0.5rem;
      border-bottom: 3px solid var(--newsletter-accent);
      display: inline-block;
    }

    .newsletter-prose {
      font-size: 1.0625rem;
      line-height: 1.75;
      color: var(--newsletter-text);
    }

    .newsletter-prose p {
      margin-bottom: 1.25rem;
    }

    /* Featured Post Card */
    .featured-post {
      background: white;
      border: 1px solid var(--newsletter-border);
      border-radius: 8px;
      padding: 1.5rem;
      margin: 1.5rem 0;
      box-shadow: 0 2px 8px rgba(0,0,0,0.04);
    }

    .featured-post-label {
      font-size: 0.75rem;
      text-transform: uppercase;
      letter-spacing: 0.1em;
      color: var(--newsletter-accent);
      font-weight: 600;
      margin-bottom: 0.5rem;
    }

    .featured-post h3 {
      font-size: 1.375rem;
      margin-bottom: 0.5rem;
    }

    .featured-post h3 a {
      color: var(--newsletter-text);
      text-decoration: none;
      transition: color 0.2s;
    }

    .featured-post h3 a:hover {
      color: var(--newsletter-accent);
    }

    .featured-post-subtitle {
      color: var(--newsletter-text-secondary);
      font-size: 1rem;
      margin-bottom: 1rem;
      font-style: italic;
    }

    .featured-post-cta {
      display: inline-block;
      background: var(--newsletter-accent);
      color: white;
      padding: 0.625rem 1.25rem;
      border-radius: 6px;
      text-decoration: none;
      font-weight: 500;
      font-size: 0.9375rem;
      transition: opacity 0.2s, transform 0.2s;
    }

    .featured-post-cta:hover {
      opacity: 0.9;
      transform: translateY(-1px);
      color: white;
      text-decoration: none;
    }

    /* Reads/Curation Section */
    .read-item {
      margin-bottom: 1.5rem;
      padding-bottom: 1.5rem;
      border-bottom: 1px dashed var(--newsletter-border);
    }

    .read-item:last-child {
      border-bottom: none;
      margin-bottom: 0;
      padding-bottom: 0;
    }

    .read-item-title {
      font-weight: 600;
      font-size: 1.0625rem;
      margin-bottom: 0.375rem;
    }

    .read-item-title a {
      color: var(--newsletter-text);
      text-decoration: none;
      border-bottom: 1px solid var(--newsletter-accent);
      transition: color 0.2s, border-color 0.2s;
    }

    .read-item-title a:hover {
      color: var(--newsletter-accent);
    }

    .read-item-commentary {
      color: var(--newsletter-text-secondary);
      font-size: 0.9375rem;
      line-height: 1.6;
    }

    /* Footer */
    .newsletter-footer {
      background: var(--newsletter-text);
      color: var(--newsletter-bg);
      padding: 2.5rem 1.5rem;
      margin-top: 2rem;
    }

    .newsletter-footer-content {
      max-width: 680px;
      margin: 0 auto;
      text-align: center;
    }

    .newsletter-footer h3 {
      color: var(--newsletter-bg);
      font-size: 1.25rem;
      margin-bottom: 0.75rem;
    }

    .newsletter-footer p {
      color: #CCCCCC;
      font-size: 0.9375rem;
      margin-bottom: 1.5rem;
      line-height: 1.6;
    }

    .newsletter-footer a {
      color: var(--newsletter-accent);
      text-decoration: none;
    }

    .newsletter-footer a:hover {
      text-decoration: underline;
    }

    .social-links {
      display: flex;
      justify-content: center;
      gap: 1.5rem;
      margin-bottom: 1.5rem;
    }

    .social-links a {
      color: var(--newsletter-bg);
      transition: color 0.2s;
    }

    .social-links a:hover {
      color: var(--newsletter-accent);
    }

    .newsletter-legal {
      font-size: 0.8125rem;
      color: #999999;
      border-top: 1px solid #444444;
      padding-top: 1.5rem;
      margin-top: 1.5rem;
    }

    /* Back to site link */
    .back-to-site {
      display: inline-flex;
      align-items: center;
      gap: 0.5rem;
      color: var(--newsletter-text-secondary);
      text-decoration: none;
      font-size: 0.875rem;
      margin-bottom: 1rem;
      transition: color 0.2s;
    }

    .back-to-site:hover {
      color: var(--newsletter-accent);
    }

    /* Responsive adjustments */
    @media (max-width: 640px) {
      .newsletter-logo {
        font-size: 2rem;
      }

      .newsletter-content {
        padding: 1.5rem 1rem;
      }

      .newsletter-section h2 {
        font-size: 1.25rem;
      }
    }
  </style>
</head>
<body class="newsletter-container">
  <div class="newsletter-header">
    <a href="/newsletter" class="back-to-site">
      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
      </svg>
      All Newsletters
    </a>
    <div class="newsletter-logo">The Monthly <span>Retro</span></div>
    <div class="newsletter-date">{{ month }} {{ year }}</div>
  </div>

  <main class="newsletter-content">
    <!-- The Retrospective Section -->
    <section class="newsletter-section">
      <h2>The Retrospective</h2>
      <div class="newsletter-prose">
        {{ content | safe }}
      </div>
    </section>

    <!-- Featured Post Section -->
    <section class="newsletter-section">
      <h2>Latest Essay</h2>
      {% set latestPost = collections.blog | first %}
      {% if latestPost %}
      <div class="featured-post">
        <div class="featured-post-label">Featured Post</div>
        <h3><a href="{{ latestPost.url }}">{{ latestPost.data.title }}</a></h3>
        {% if latestPost.data.subtitle %}
        <p class="featured-post-subtitle">{{ latestPost.data.subtitle }}</p>
        {% endif %}
        <a href="{{ latestPost.url }}" class="featured-post-cta">Read the full post</a>
      </div>
      {% endif %}
    </section>

    <!-- This Month's Reads Section -->
    <section class="newsletter-section">
      <h2>This Month's Reads</h2>
      <div class="newsletter-prose">
        <p>A curated selection of articles that caught my attention this month.</p>
      </div>
      {% set thirtyDaysAgo = date | date("yyyy-MM-dd") %}
      {% set monthlyReads = raindrop | sort(false, false, 'dateAdded') | reverse %}
      {% set readCount = 0 %}
      {% for article in monthlyReads %}
        {% if 'to-share' in article.tags and readCount < 5 %}
          {% set readCount = readCount + 1 %}
          {% set customCommentary = readCommentary[article.url] if readCommentary else null %}
          <div class="read-item">
            <div class="read-item-title">
              <a href="{{ article.url }}" target="_blank" rel="noopener noreferrer">{{ article.title }}</a>
            </div>
            {% if customCommentary %}
            <p class="read-item-commentary">{{ customCommentary }}</p>
            {% elif article.excerpt %}
            <p class="read-item-commentary">{{ article.excerpt }}</p>
            {% endif %}
          </div>
        {% endif %}
      {% endfor %}
      <div style="margin-top: 1.5rem;">
        <a href="/reads" style="color: var(--newsletter-accent); font-weight: 500;">View all reads &rarr;</a>
      </div>
    </section>
  </main>

  <footer class="newsletter-footer">
    <div class="newsletter-footer-content">
      <h3>Let's Continue the Conversation</h3>
      <p>
        Found something valuable here? I'd love to hear your thoughts.
        <a href="mailto:email@sanjaynair.dev">Reply to this email</a> or connect with me on social media.
      </p>

      <div class="social-links">
        <a href="https://linkedin.com/in/sanjay-nair" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/>
          </svg>
        </a>
        <a href="https://x.com/Nirespire" target="_blank" rel="noopener noreferrer" aria-label="X (Twitter)">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
          </svg>
        </a>
        <a href="https://bsky.app/profile/nirespire.bsky.social" target="_blank" rel="noopener noreferrer" aria-label="Bluesky">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
            <path d="M12 10.8c-1.087-2.114-4.046-6.053-6.798-7.995C2.566.944 1.561 1.266.902 1.565.139 1.908 0 3.08 0 3.768c0 .69.378 5.65.624 6.479.815 2.736 3.713 3.66 6.383 3.364.136-.02.275-.039.415-.056-.138.022-.276.04-.415.056-3.912.58-7.387 2.005-2.83 7.078 5.013 5.19 6.87-1.113 7.823-4.308.953 3.195 2.05 9.271 7.733 4.308 4.267-4.308 1.172-6.498-2.74-7.078a8.741 8.741 0 0 1-.415-.056c.14.017.279.036.415.056 2.67.297 5.568-.628 6.383-3.364.246-.828.624-5.79.624-6.478 0-.69-.139-1.861-.902-2.206-.659-.298-1.664-.62-4.3 1.24C16.046 4.748 13.087 8.687 12 10.8Z"/>
          </svg>
        </a>
      </div>

      <p style="font-style: italic; margin-bottom: 1rem;">
        Know someone who'd enjoy this? Forward it along!
      </p>

      <div class="newsletter-legal">
        <p>
          <a href="/">sanjaynair.me</a> &bull; Atlanta, GA
        </p>
        <p style="margin-top: 0.5rem;">
          <a href="/newsletter">View past newsletters</a>
        </p>
      </div>
    </div>
  </footer>
</body>
</html>
